# 💳 전체 결제 정보 조회 가이드

## 🚀 빠른 시작

### 1단계: 페이지 접속
```
https://www.aicitybuilders.com/admin/payment-details
```

### 2단계: 정보 확인
- **자동으로** 결제 목록이 표시됩니다
- 마스킹 없는 전체 정보 확인 가능

---

## 📊 화면 구성

```
┌─────────────────────────────────────────┐
│  💳 전체 결제 정보 (마스킹 없음)        │
│  토스페이먼츠에서 받은 원본 정보 · 총 X건│
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│  🔍 검색창                               │
│  [이름, 이메일, 주문번호 검색...]       │
│                                          │
│  📁 필터: [모든 결제수단 ▼]             │
│  📥 [CSV 다운로드] [전체 삭제]          │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│  ✅ 결제완료    카드                     │
│                                          │
│  고객 정보                               │
│  - 이름: 홍길동 [📋 복사]               │
│  - 이메일: hong@email.com [📋 복사]     │
│  - 전화번호: 01012345678 [📋 복사]      │
│                                          │
│  결제 정보                               │
│  - 금액: ₩95,000                        │
│  - 주문번호: order_123...               │
│  - 승인시간: 2025-11-24 08:00:00        │
└─────────────────────────────────────────┘

(가상계좌인 경우 추가 정보 표시)
┌─────────────────────────────────────────┐
│  가상계좌 정보                           │
│  - 입금자명: 홍길동                     │
│  - 은행: 신한                            │
│  - 계좌번호: 123456789                   │
│  - 입금기한: 2025-11-30 23:59:59        │
└─────────────────────────────────────────┘
```

---

## 🎯 주요 기능

### 1. 검색 기능
```
검색창에 입력:
- 고객 이름 (예: "홍길동")
- 이메일 (예: "hong@email.com")
- 주문번호 (예: "order_123")
```

### 2. 필터 기능
```
필터 드롭다운:
- 모든 결제수단
- 가상계좌만
- 카드만
- 간편결제만
```

### 3. 복사 기능
```
각 정보 옆의 [📋] 버튼 클릭:
→ 클립보드에 복사됨
→ 버튼이 초록색으로 변경 (2초간)
```

### 4. CSV 다운로드
```
[CSV 다운로드] 버튼 클릭:
→ payment_details_2025-11-24.csv 다운로드
→ 엑셀에서 열기 가능
```

### 5. 전체 삭제
```
[전체 삭제] 버튼 클릭:
→ 확인 대화상자 표시
→ 확인 시 모든 데이터 삭제
⚠️ 주의: 복구 불가능!
```

---

## 💡 활용 예시

### 예시 1: 새로운 결제 확인
```
1. 고객이 결제 완료 알림
2. /admin/payment-details 접속
3. 최신 결제가 맨 위에 표시됨
4. 이메일 복사 버튼 클릭
5. AdminEnrollmentFixPage에서 수강 등록
```

### 예시 2: 특정 고객 찾기
```
1. 검색창에 고객 이름 입력
2. 해당 고객 결제 내역만 표시
3. 정보 확인 및 복사
```

### 예시 3: 월별 정산
```
1. 필터: "가상계좌만" 선택
2. CSV 다운로드
3. 엑셀에서 정산 작업
```

---

## 🔍 상태별 색상 가이드

| 상태 | 색상 | 의미 |
|------|------|------|
| ✅ 결제완료 | 초록색 테두리 | 입금 완료 (DONE) |
| ⏳ 입금대기 | 주황색 테두리 | 가상계좌 입금 대기 중 |
| 회색 | 회색 테두리 | 기타 상태 |

---

## ❓ FAQ

### Q1: 이전 결제 내역도 볼 수 있나요?
**A:** 이 기능은 방금 구현되었으므로, **지금부터 발생하는 결제**만 저장됩니다.

### Q2: 최대 몇 개까지 저장되나요?
**A:** 최대 100개까지 저장됩니다. (가장 오래된 것부터 자동 삭제)

### Q3: 다른 컴퓨터에서도 볼 수 있나요?
**A:** 아니요. localStorage에 저장되므로 **같은 브라우저**에서만 확인 가능합니다.
나중에 Azure Table Storage로 업그레이드하면 어디서든 확인 가능합니다.

### Q4: 데이터가 안전한가요?
**A:** localStorage는 브라우저에만 저장됩니다. 더 안전하게 하려면:
1. 주기적으로 CSV 다운로드
2. 백업 저장
3. 나중에 Azure로 업그레이드

### Q5: 정보가 안 보여요
**A:** 
1. 새로운 결제가 아직 없는 경우
2. 브라우저 캐시 삭제로 데이터 손실
3. F12 콘솔에서 에러 확인

---

## 🛠️ 문제 해결

### 문제: 결제했는데 정보가 안 보여요
```
해결:
1. F12 눌러서 콘솔 확인
2. "📝 전체 결제 정보" 로그 확인
3. localStorage 확인:
   - F12 → Application → Local Storage
   - "all_payment_details" 키 확인
```

### 문제: 복사 버튼이 작동 안 해요
```
해결:
1. HTTPS로 접속했는지 확인
2. 브라우저 권한 확인
3. 수동으로 선택해서 복사
```

### 문제: CSV 다운로드가 안 돼요
```
해결:
1. 팝업 차단 해제
2. 다운로드 권한 확인
3. 브라우저 업데이트
```

---

## 🎓 다음 단계

### 현재 (방법 2): localStorage 저장
- ✅ 간단하고 빠름
- ❌ 한 브라우저에서만 확인 가능
- ❌ 100개 제한

### 미래 (방법 1): Webhook + Azure 저장
- ✅ 어디서든 확인 가능
- ✅ 무제한 저장
- ✅ 자동 백업
- ✅ 팀원과 공유 가능

**업그레이드 원하시면 말씀해주세요!**

---

## 📞 지원

문제가 있으면:
1. F12 콘솔 스크린샷
2. 결제 시간
3. 고객 정보 (가능한 범위에서)

위 정보와 함께 문의해주세요!

