import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Clock, Users, Star, Calendar, CheckCircle, Play } from 'lucide-react';
import { loadTossPayments } from '@tosspayments/payment-sdk';
import { premiumCourse } from '../data/courseData';
import AzureTableService from '../services/azureTableService';
import NavigationBar from './NavigationBar';
import { getPaymentConfig } from '../config/payment';

// SEO Î©îÌÉÄ ÌÉúÍ∑∏ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò
const updateCourseMetaTags = () => {
  // ÌéòÏù¥ÏßÄ Ï†úÎ™© ÏóÖÎç∞Ïù¥Ìä∏
  document.title = 'üèóÔ∏è Í∞ïÏùò 1: AI Í±¥Î¨º ÏßìÍ∏∞ - ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨º ÏôÑÏÑ±ÌïòÍ∏∞ | AI City Builders';
  
  // Î©îÌÉÄ description ÏóÖÎç∞Ïù¥Ìä∏
  const metaDescription = document.querySelector('meta[name="description"]');
  if (metaDescription) {
    metaDescription.setAttribute('content', 'AIÎ°ú ÏõîÏÑ∏ Î∞õÎäî ÎÇòÏùò Ï≤´ ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨º ÏßìÍ∏∞! Ïú†ÌäúÎ∏å Ï±ÑÎÑê ÏôÑÏÑ±Î∂ÄÌÑ∞ Ïï†ÎìúÏÑºÏä§ ÏàòÏùµÍπåÏßÄ 14Í∞ïÏùò ÏôÑÏ†Ñ Í∞ÄÏù¥Îìú');
  }
  
  // Open Graph ÌÉúÍ∑∏ ÏóÖÎç∞Ïù¥Ìä∏
  const ogTitle = document.querySelector('meta[property="og:title"]');
  if (ogTitle) {
    ogTitle.setAttribute('content', 'üèóÔ∏è Í∞ïÏùò 1: AI Í±¥Î¨º ÏßìÍ∏∞ - ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨º ÏôÑÏÑ±ÌïòÍ∏∞');
  }
  
  const ogDescription = document.querySelector('meta[property="og:description"]');
  if (ogDescription) {
    ogDescription.setAttribute('content', 'AI Î©òÌÜ† Ï†úÏù¥ÏôÄ Ìï®Íªò ÎÇòÎßåÏùò Ï≤´ Î≤àÏß∏ ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨ºÏùÑ ÏôÑÏÑ±ÌïòÏÑ∏Ïöî! ÏûÖÏßÄ ÏÑ†Ï†ïÎ∂ÄÌÑ∞ Ï≤´ ÏõîÏÑ∏ Î∞õÍ∏∞ÍπåÏßÄ Ï≤¥Í≥ÑÏ†ÅÏù∏ 4Îã®Í≥Ñ Í≥ºÏ†ï');
  }
};

interface WorkflowAutomationMasterPageProps {
  onBack: () => void;
}

const WorkflowAutomationMasterPage: React.FC<WorkflowAutomationMasterPageProps> = ({ onBack }) => {
  const navigate = useNavigate();
  const [isLoading, setIsLoading] = useState(false);
  const [tossPayments, setTossPayments] = useState<any>(null);
  const [isLoggedIn, setIsLoggedIn] = useState(false);

  const [isAlreadyEnrolled, setIsAlreadyEnrolled] = useState(false);
  const [checkingEnrollment, setCheckingEnrollment] = useState(false);
  // timeLeft state Ï†úÍ±∞ (ÌòÑÏû¨ ÏàòÍ∞ï Í∞ÄÎä•ÌïòÎØÄÎ°ú Î∂àÌïÑÏöî)

  // ÌÜ†Ïä§ÌéòÏù¥Î®ºÏ∏† ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞
  const { clientKey } = getPaymentConfig();

  // AI Í±¥Î¨º ÏßìÍ∏∞ - ÎîîÏßÄÌÑ∏ Í±¥Ï∂ïÍ∞Ä Í≥ºÏ†ï Í∞ïÏùò Îç∞Ïù¥ÌÑ∞
  const course = {
    ...premiumCourse,
    title: 'Í∞ïÏùò 1: AI Í±¥Î¨º ÏßìÍ∏∞ - ÎîîÏßÄÌÑ∏ Í±¥Ï∂ïÍ∞Ä Í≥ºÏ†ï',
    lessons: [
      // PART 1: ÏûÖÏßÄ ÏÑ†Ï†ï - Í±¥Î¨ºÏùÑ ÏÑ∏Ïö∏ 'ÎîîÏßÄÌÑ∏ Îß®Ìï¥Ìäº ÎïÖ'ÏùÑ Ï∞æÏïÑÎùº
      {
        id: 1,
        title: 'Chapter 1. ÏïÑÌÇ§ÌÖçÌä∏Ïùò ÏÑ†Ïñ∏: Ïôú "ÏãúÏä§ÌÖú"ÏùÑ ÏÑ§Í≥ÑÌï¥Ïïº ÌïòÎäîÍ∞Ä?',
        duration: '45Î∂Ñ',
        description: 'Îã®ÏàúÌïú ÏΩòÌÖêÏ∏† Ï†úÏûëÏûêÍ∞Ä ÏïÑÎãå, ÏàòÏùµÏùÑ Ï∞ΩÏ∂úÌïòÎäî ÎîîÏßÄÌÑ∏ Í±¥Î¨ºÏ£ºÍ∞Ä ÎêòÍ∏∞ ÏúÑÌïú ÎßàÏù∏ÎìúÏÖãÍ≥º ÏãúÏä§ÌÖú ÏÑ§Í≥Ñ Ï≤†ÌïôÏùÑ Î∞∞ÏõÅÎãàÎã§.',
        hasQuiz: true
      },
      {
        id: 2,
        title: 'Chapter 2. [Ïã§Ïäµ] ÏÉÅÍ∂å Î∂ÑÏÑù ÎìúÎ°†: AI Studio Îî• Î¶¨ÏÑúÏπò',
        duration: '60Î∂Ñ',
        description: 'AIÎ•º ÌôúÏö©Ìï¥ ÏàòÏùµÏÑ± ÎÜíÏùÄ ÌãàÏÉà ÏãúÏû•ÏùÑ Î∞úÍµ¥ÌïòÍ≥†, ÌÉÄÍ≤ü Í≥†Í∞ùÏ∏µÏùò ÎãàÏ¶àÎ•º Ï†ïÌôïÌûà ÌååÏïÖÌïòÎäî Ïã§Ï†Ñ Î¶¨ÏÑúÏπò Í∏∞Î≤ï',
        hasQuiz: true
      },
      {
        id: 3,
        title: 'Chapter 3. Í±¥Ï∂ï ÌóàÍ∞Ä Ïã†Ï≤≠: AI ÎπÑÏ¶àÎãàÏä§ Î™®Îç∏ Ï∫îÎ≤ÑÏä§ ÏûëÏÑ±',
        duration: '50Î∂Ñ',
        description: 'ÎÇòÎßåÏùò ÏàòÏùµÌòï ÏΩòÌÖêÏ∏† Ï±ÑÎÑêÏùÑ ÏúÑÌïú ÎπÑÏ¶àÎãàÏä§ Î™®Îç∏ÏùÑ ÏÑ§Í≥ÑÌïòÍ≥†, ÏàòÏùµÌôî Ï†ÑÎûµÏùÑ Íµ¨Ï≤¥ÌôîÌï©ÎãàÎã§.',
        hasQuiz: true
      },
      
      // PART 2: ÏÑ§Í≥Ñ Î∞è Ïû¨Î£å ÌôïÎ≥¥ - ÏµúÍ≥†Ïùò Í±¥Ï∂ï ÏûêÏû¨Î•º ÌôïÎ≥¥ÌïòÎùº
      {
        id: 4,
        title: 'Chapter 4. [Ïã§Ïäµ] Ïû¨Î£åÌïô I: ÌÖçÏä§Ìä∏ (ÏÑ§Í≥ÑÎèÑ & Í≥®Ï°∞)',
        duration: '55Î∂Ñ',
        description: 'ChatGPT, ClaudeÎ•º ÌôúÏö©Ìïú Îß§Î†•Ï†ÅÏù∏ Ïä§ÌÅ¨Î¶ΩÌä∏, Ï†úÎ™©, ÏÑ§Î™Ö ÏûëÏÑ±. ÏΩòÌÖêÏ∏†Ïùò ÎºàÎåÄÍ∞Ä ÎêòÎäî ÌÖçÏä§Ìä∏ Ï†úÏûë ÎßàÏä§ÌÑ∞',
        hasQuiz: true
      },
      {
        id: 5,
        title: 'Chapter 5. [Ïã§Ïäµ] Ïû¨Î£åÌïô II: Ïù¥ÎØ∏ÏßÄ (ÎÇ¥/Ïô∏Ïû•Ïû¨ & ÎîîÏûêÏù∏)',
        duration: '60Î∂Ñ',
        description: 'Midjourney, CanvaÎ•º ÌôúÏö©Ìïú Ïç∏ÎÑ§Ïùº, Î°úÍ≥†, Î∏åÎûúÎî© Ïù¥ÎØ∏ÏßÄ Ï†úÏûë. ÏãúÍ∞ÅÏ†Å Îß§Î†•ÎèÑÎ•º Í∑πÎåÄÌôîÌïòÎäî ÎîîÏûêÏù∏ Ïã§Ïäµ',
        hasQuiz: true
      },
      {
        id: 6,
        title: 'Chapter 6. [Ïã§Ïäµ] Ïû¨Î£åÌïô III: ÏÇ¨Ïö¥Îìú (ÏùåÌñ• ÏãúÏÑ§ & Î∂ÑÏúÑÍ∏∞)',
        duration: '50Î∂Ñ',
        description: 'ElevenLabs ÏùåÏÑ± ÏÉùÏÑ±Í≥º Î∞∞Í≤ΩÏùåÏïÖ ÌôúÏö©Î≤ï. Ï≤≠Ï∑®ÏûêÎ•º Î™∞ÏûÖÏãúÌÇ§Îäî Ïò§ÎîîÏò§ ÏΩòÌÖêÏ∏† Ï†úÏûë Í∏∞Î≤ï',
        hasQuiz: true
      },
      {
        id: 7,
        title: 'Chapter 7. [Ïã§Ïäµ] Ïû¨Î£åÌïô IV: ÏòÅÏÉÅ (Ï∞ΩÎ¨∏ & ÎØ∏ÎîîÏñ¥ ÌååÏÇ¨Îìú)',
        duration: '70Î∂Ñ',
        description: 'Runway, CapCutÏùÑ ÌôúÏö©Ìïú Í≥†ÌíàÏßà ÏòÅÏÉÅ Ï†úÏûë. Î∞îÏù¥Îü¥ ÏòÅÏÉÅÏùò ÎπÑÎ∞ÄÍ≥º Ìé∏Ïßë ÎÖ∏ÌïòÏö∞ ÏôÑÏ†Ñ Ï†ïÎ≥µ',
        hasQuiz: true
      },
      
      // PART 3: ÏãúÍ≥µ Î∞è ÏôÑÍ≥µ - ÎãπÏã†Ïùò Ï≤´ Í±¥Î¨ºÏùÑ ÏÑ∏ÏÉÅÏóê Í≥µÍ∞úÌïòÎùº
      {
        id: 8,
        title: 'Chapter 8. [Ïã§Ïäµ] 1Ï∏µ ÏÉÅÍ∞Ä ÏãúÍ≥µ: VeoÎ•º ÌôúÏö©Ìïú Î∞îÏù¥Îü¥ ÏàèÌèº Ï†úÏûë',
        duration: '65Î∂Ñ',
        description: 'Ïú†ÌäúÎ∏å ÏáºÏ∏†, Ìã±ÌÜ°Ïö© Î∞îÏù¥Îü¥ ÏòÅÏÉÅ Ï†úÏûë. ÏßßÏùÄ ÏãúÍ∞ÑÏóê Í∞ïÎ†•Ìïú ÏûÑÌå©Ìä∏Î•º Ï£ºÎäî ÏàèÌèº ÏΩòÌÖêÏ∏† Ï†ÑÎûµ',
        hasQuiz: true
      },
      {
        id: 9,
        title: 'Chapter 9. [Ïã§Ïäµ] Î≥∏ Í±¥Î¨º ÏãúÍ≥µ: AI Í∏∞Î∞ò Í≥†ÌíàÏßà Î°±Ìèº Ï†úÏûë',
        duration: '75Î∂Ñ',
        description: 'Î©îÏù∏ Ïú†ÌäúÎ∏å Ï±ÑÎÑêÏö© Î°±Ìèº ÏΩòÌÖêÏ∏† Ï†úÏûë. Íµ¨ÎèÖÏûêÏôÄ ÍπäÏù¥ ÏûàÎäî Í¥ÄÍ≥ÑÎ•º ÎßåÎìúÎäî Í≥†ÌíàÏßà ÏòÅÏÉÅ Ï†úÏûëÎ≤ï',
        hasQuiz: true
      },
      {
        id: 10,
        title: 'Chapter 10. Ï§ÄÍ≥µÏãù(Launch): Ïú†ÌäúÎ∏å Ï±ÑÎÑêÏóê ÏΩòÌÖêÏ∏† ÏóÖÎ°úÎìú Î∞è Ï¥àÍ∏∞ Î∞òÏùë Î∂ÑÏÑù',
        duration: '55Î∂Ñ',
        description: 'ÏôÑÏÑ±Îêú ÏΩòÌÖêÏ∏†Ïùò Ï†ÑÎûµÏ†Å ÏóÖÎ°úÎìúÏôÄ Ï¥àÍ∏∞ ÏÑ±Í≥º Î∂ÑÏÑù. Îü∞Ïπ≠ ÌõÑ ÏµúÏ†ÅÌôî Ï†ÑÎûµÍπåÏßÄ ÏôÑÎ≤Ω Í∞ÄÏù¥Îìú',
        hasQuiz: true
      },
      
      // PART 4: Ï≤´ ÏõîÏÑ∏ Î∞õÍ∏∞ - Í±¥Î¨ºÏóêÏÑú Ï≤´ ÏàòÏùµÏùÑ Ï∞ΩÏ∂úÌïòÎùº
      {
        id: 11,
        title: 'Chapter 11. ÏàòÏùµÌòï Ïù∏ÌÖåÎ¶¨Ïñ¥ Ï≤†Ìïô: Í∞ÄÏπò Ï†úÏïàÍ≥º Í∞ÄÍ≤© Ï±ÖÏ†ï',
        duration: '50Î∂Ñ',
        description: 'ÏΩòÌÖêÏ∏†Î°ú ÏàòÏùµÏùÑ Ï∞ΩÏ∂úÌïòÎäî ÌïµÏã¨ ÏõêÎ¶¨ÏôÄ Í∞ÄÍ≤© Ï±ÖÏ†ï Ï†ÑÎûµ. Í∞ÄÏπò ÏûàÎäî ÏΩòÌÖêÏ∏†Î°ú ÏàòÏùµÌôîÌïòÎäî Ï≤†Ìïô',
        hasQuiz: true
      },
      {
        id: 12,
        title: 'Chapter 12. [Ïã§Ïäµ] Ïù∏ÌÖåÎ¶¨Ïñ¥ I: ÎîîÏßÄÌÑ∏ Í¥ëÍ≥†Ìåê ÏÑ§Ïπò (Ïï†ÎìúÏÑºÏä§ Ïó∞Îèô)',
        duration: '60Î∂Ñ',
        description: 'Ïú†ÌäúÎ∏å Ïï†ÎìúÏÑºÏä§ ÏÑ§Ï†ïÎ∂ÄÌÑ∞ ÏàòÏùµ ÏµúÏ†ÅÌôîÍπåÏßÄ. Ï≤´ Í¥ëÍ≥† ÏàòÏùµÏùÑ ÎßåÎìúÎäî ÏôÑÏ†ÑÌïú Í∞ÄÏù¥Îìú',
        hasQuiz: true
      },
      {
        id: 13,
        title: 'Chapter 13. [Ïã§Ïäµ] Ïù∏ÌÖåÎ¶¨Ïñ¥ II: ÌîåÎûòÍ∑∏Ïã≠ Ïä§ÌÜ†Ïñ¥ ÏûÖÏ†ê (Ïú†ÌäúÎ∏å ÏáºÌïë)',
        duration: '55Î∂Ñ',
        description: 'Ïú†ÌäúÎ∏å ÏáºÌïë Í∏∞Îä• ÌôúÏö©Í≥º Ï†úÌíà ÌåêÎß§ Ïó∞Îèô. ÏΩòÌÖêÏ∏†Î•º ÌÜµÌïú ÏßÅÏ†ë ÌåêÎß§ ÏàòÏùµ Ï∞ΩÏ∂ú Ï†ÑÎûµ',
        hasQuiz: true
      },
      
      // ÏµúÏ¢Ö ÌîÑÎ°úÏ†ùÌä∏ & Î©òÌÜ†ÎßÅ
      {
        id: 14,
        title: '[ÏµúÏ¢Ö ÌîÑÎ°úÏ†ùÌä∏] ÎÇòÏùò Ï≤´ "ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨º" Ï§ÄÍ≥µ ÏôÑÎ£å',
        duration: '30Î∂Ñ',
        description: 'ÏàòÏùµ Ïó∞ÎèôÎêú Ïú†ÌäúÎ∏å Ï±ÑÎÑê ÏôÑÏÑ±Í≥º Ï≤´ ÏàòÏùµ Îã¨ÏÑ± Ïù∏Ï¶ù. ÎîîÏßÄÌÑ∏ Í±¥Î¨ºÏ£ºÎ°úÏÑúÏùò Ï≤´ Í±∏ÏùåÏùÑ ÏôÑÏÑ±Ìï©ÎãàÎã§.',
        hasQuiz: false
      }
    ]
  };
  const originalPrice = 349000;
  const earlyBirdPrice = 199000;
  const discount = Math.round(((originalPrice - earlyBirdPrice) / originalPrice) * 100);

  // ÌòÑÏû¨ ÏàòÍ∞ï Í∞ÄÎä•Ìïú ÏÉÅÌÉúÎ°ú Î≥ÄÍ≤Ω

  useEffect(() => {
    // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú SEO Î©îÌÉÄ ÌÉúÍ∑∏ ÏóÖÎç∞Ïù¥Ìä∏
    updateCourseMetaTags();
    
    // sessionStorageÏóêÏÑú Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏
    const checkLoginStatus = async () => {
      const storedUserInfo = sessionStorage.getItem('aicitybuilders_user_session');
      setIsLoggedIn(!!storedUserInfo);
      
      if (storedUserInfo) {
        try {
          const parsedUserInfo = JSON.parse(storedUserInfo);
          
          // ÏàòÍ∞ï ÏÉÅÌÉú ÌôïÏù∏
          setCheckingEnrollment(true);
          const enrolled = await AzureTableService.isUserEnrolledInCourse(
            parsedUserInfo.email, 
            'ai-building'
          );
          setIsAlreadyEnrolled(enrolled);
          setCheckingEnrollment(false);
        } catch (error) {
          console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌôïÏù∏ Ïã§Ìå®:', error);
          setCheckingEnrollment(false);
        }
      } else {
        setIsAlreadyEnrolled(false);
      }
    };

    checkLoginStatus();

    const initializeTossPayments = async () => {
      try {
        const tossPaymentsInstance = await loadTossPayments(clientKey);
        console.log('Ï¥àÍ∏∞ÌôîÎêú tossPayments Ïù∏Ïä§ÌÑ¥Ïä§:', tossPaymentsInstance);
        setTossPayments(tossPaymentsInstance);
      } catch (error) {
        console.error('ÌÜ†Ïä§ÌéòÏù¥Î®ºÏ∏† Ï¥àÍ∏∞Ìôî Ïã§Ìå®:', error);
      }
    };

    initializeTossPayments();

    // storage Ïù¥Î≤§Ìä∏ Í∞êÏßÄ (Îã§Î•∏ ÌÉ≠ÏóêÏÑú Î°úÍ∑∏Ïù∏/Î°úÍ∑∏ÏïÑÏõÉ Ïãú)
    const handleStorageChange = () => {
      checkLoginStatus();
    };

    window.addEventListener('storage', handleStorageChange);
    window.addEventListener('focus', checkLoginStatus); // ÌéòÏù¥ÏßÄ Ìè¨Ïª§Ïä§ ÏãúÏóêÎèÑ ÌôïÏù∏

    return () => {
      window.removeEventListener('storage', handleStorageChange);
      window.removeEventListener('focus', checkLoginStatus);
    };
  }, [clientKey]);

  // Ïπ¥Ïö¥Ìä∏Îã§Ïö¥ ÌÉÄÏù¥Î®∏ Ï†úÍ±∞ (ÌòÑÏû¨ ÏàòÍ∞ï Í∞ÄÎä•ÌïòÎØÄÎ°ú Î∂àÌïÑÏöî)

  const handleLoginRequired = () => {
    alert('Í≤∞Ï†úÌïòÎ†§Î©¥ Î®ºÏ†Ä Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî!');
    navigate('/login');
  };

  const handleEarlyBirdPayment = async () => {
    // Î°úÍ∑∏Ïù∏ Ï≤¥ÌÅ¨
    const userInfo = sessionStorage.getItem('aicitybuilders_user_session');
    if (!userInfo) {
      handleLoginRequired();
      return;
    }

    if (!tossPayments) {
      alert('Í≤∞Ï†ú ÏãúÏä§ÌÖúÏùÑ Ï¥àÍ∏∞ÌôîÌïòÎäî Ï§ëÏûÖÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
      return;
    }

    setIsLoading(true);

    try {
      const orderId = `order_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      
      // ÌÜ†Ïä§ÌéòÏù¥Î®ºÏ∏† ÏßÅÏ†ë requestPayment Ìò∏Ï∂ú (SDK Î≤ÑÏ†ÑÏóê ÎßûÍ≤å)
      await tossPayments.requestPayment('Ïπ¥Îìú', {
        amount: earlyBirdPrice,
        orderId: orderId,
        orderName: `[ÏñºÎ¶¨Î≤ÑÎìú] ${course.title}`,
        customerName: 'ÌÅ¥ÎûòÌäº ÏàòÍ∞ïÏÉù',
        successUrl: `${window.location.origin}/payment/success?course=ai-building`,
        failUrl: `${window.location.origin}/payment/fail`,
        card: {
          useEscrow: false,
        },
      });

    } catch (error: any) {
      console.error('Í≤∞Ï†ú Ïã§Ìå®:', error);
      let errorMessage = '';
      
      if (error.code === 'USER_CANCEL') {
        errorMessage = 'üí≥ Í≤∞Ï†úÍ∞Ä Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.\nÏñ∏Ï†úÎì†ÏßÄ Îã§Ïãú ÏãúÎèÑÌïòÏã§ Ïàò ÏûàÏäµÎãàÎã§.';
      } else if (error.code === 'INVALID_CARD') {
        errorMessage = '‚ùå Ïπ¥Îìú Ï†ïÎ≥¥Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.\nÏπ¥ÎìúÎ≤àÌò∏, Ïú†Ìö®Í∏∞Í∞Ñ, CVCÎ•º Îã§Ïãú ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.';
      } else if (error.code === 'INSUFFICIENT_FUNDS') {
        errorMessage = 'üí∞ Ïπ¥Îìú ÌïúÎèÑÍ∞Ä Î∂ÄÏ°±Ìï©ÎãàÎã§.\nÎã§Î•∏ Í≤∞Ï†úÏàòÎã®ÏùÑ Ïù¥Ïö©ÌïòÍ±∞ÎÇò ÌïúÎèÑÎ•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.';
      } else if (error.code === 'NETWORK_ERROR') {
        errorMessage = 'üåê ÎÑ§Ìä∏ÏõåÌÅ¨ Ïó∞Í≤∞Ïóê Î¨∏Ï†úÍ∞Ä ÏûàÏäµÎãàÎã§.\nÏù∏ÌÑ∞ÎÑ∑ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÍ≥† Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.';
      } else {
        errorMessage = `‚ö†Ô∏è Í≤∞Ï†ú Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\n\nÎ¨∏Ï†úÍ∞Ä ÏßÄÏÜçÎêòÎ©¥ Í≥†Í∞ùÏÑºÌÑ∞(contact@aicitybuilders.com)Î°ú Î¨∏ÏùòÌï¥Ï£ºÏÑ∏Ïöî.\n\nÏò§Î•ò ÏΩîÎìú: ${error.code || 'UNKNOWN'}`;
      }
      
      alert(errorMessage);
    } finally {
      setIsLoading(false);
    }
  };

  // Í≤∞Ï†ú ÏôÑÎ£åÎêú ÏÇ¨Ïö©ÏûêÏù∏ÏßÄ ÌôïÏù∏
  const isPaidUser = isLoggedIn && isAlreadyEnrolled;

  return (
    <div className="masterclass-container">
      {/* ÌÜµÏùºÎêú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖòÎ∞î */}
      <NavigationBar 
        onBack={onBack}
        breadcrumbText="Í∞ïÏùò 1: AI Í±¥Î¨º ÏßìÍ∏∞"
      />

      {isPaidUser ? (
        // Í≤∞Ï†ú ÌõÑ: Í∞ïÏùò ÏΩòÌÖêÏ∏† Î≥¥Í∏∞
        <div className="course-content-view">
          <div className="course-header" style={{ 
            padding: '20px', 
            textAlign: 'center'
          }}>
            <h1 style={{ 
              color: '#1f2937', 
              marginBottom: '10px',
              fontSize: 'clamp(1.5rem, 4vw, 2.2rem)',
              lineHeight: '1.3',
              wordBreak: 'keep-all'
            }}>
              Í∞ïÏùò 1: AI Í±¥Î¨º ÏßìÍ∏∞
            </h1>
            <h2 style={{ 
              color: '#0ea5e9', 
              fontSize: 'clamp(1rem, 3vw, 1.3rem)',
              marginBottom: '20px',
              lineHeight: '1.4',
              wordBreak: 'keep-all',
              padding: '0 10px'
            }}>
              AIÎ°ú ÏõîÏÑ∏ Î∞õÎäî ÎÇòÏùò Ï≤´<br className="mobile-break" />'ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨º' ÏßìÍ∏∞
            </h2>
            <p style={{ 
              color: '#1f2937', 
              opacity: '0.8', 
              maxWidth: '600px', 
              margin: '0 auto',
              fontSize: 'clamp(0.9rem, 2.5vw, 1rem)',
              lineHeight: '1.5',
              padding: '0 15px'
            }}>
              ÌôòÏòÅÌï©ÎãàÎã§! Ïù¥Ï†ú Ïã§Ï†ú Í∞ïÏùòÎ•º ÏãúÏ≤≠ÌïòÍ≥† ÎÇòÎßåÏùò ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨ºÏùÑ ÏôÑÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî.
            </p>
          </div>
          
          <div className="video-player-section" style={{ 
            maxWidth: '1000px', 
            margin: '0 auto', 
            padding: '0 15px 20px'
          }}>
            {/* Ïã§Ï†ú Í∞ïÏùò ÏòÅÏÉÅ ÌîåÎ†àÏù¥Ïñ¥ ÏòÅÏó≠ */}
            <div style={{
              background: 'rgba(255, 255, 255, 0.1)',
              borderRadius: '15px',
              padding: '20px',
              textAlign: 'center',
              marginBottom: '20px'
            }}>
              <h3 style={{ 
                color: '#1f2937', 
                marginBottom: '15px',
                fontSize: 'clamp(1.1rem, 3vw, 1.3rem)'
              }}>
                Chapter 1. AI Í±¥Î¨º ÏßìÍ∏∞ - ÏûÖÏßÄ ÏÑ†Ï†ïÎ∂ÄÌÑ∞ Ï≤´ ÏõîÏÑ∏ÍπåÏßÄ
              </h3>
              <div 
                className="youtube-embed-container"
                style={{
                  position: 'relative',
                  width: '100%',
                  paddingBottom: '56.25%', // 16:9 aspect ratio
                  height: 0,
                  background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)',
                  borderRadius: '10px',
                  overflow: 'hidden',
                  marginBottom: '15px',
                  border: '2px solid #0ea5e9'
                }}>
                <iframe
                  style={{
                    position: 'absolute',
                    top: 0,
                    left: 0,
                    width: '100%',
                    height: '100%',
                    border: 'none',
                    borderRadius: '8px'
                  }}
                  src="https://www.youtube.com/embed/8od7wv6tJIY?si=cM1TpOCYU-y0HIhU"
                  title="AI Í±¥Î¨º ÏßìÍ∏∞ - Chapter 1"
                  frameBorder="0"
                  loading="lazy"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowFullScreen
                  referrerPolicy="strict-origin-when-cross-origin"
                />
              </div>
              <p style={{ 
                color: '#1f2937', 
                opacity: '0.7',
                fontSize: 'clamp(0.8rem, 2vw, 0.9rem)',
                textAlign: 'center'
              }}>
                üé¨ Chapter 1: AIÎ°ú ÏõîÏÑ∏ Î∞õÎäî ÎîîÏßÄÌÑ∏ Í±¥Î¨ºÏùò Ï≤´ Í±∏ÏùåÏùÑ ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî!
              </p>
            </div>

            {/* Í∞ïÏùò Î™©Î°ù */}
            <div className="course-lessons" style={{
              background: 'rgba(255, 255, 255, 0.05)',
              borderRadius: '15px',
              padding: '20px'
            }}>
              <h3 style={{ 
                color: '#1f2937', 
                marginBottom: '15px',
                fontSize: 'clamp(1.1rem, 3vw, 1.3rem)'
              }}>
                Í∞ïÏùò Î™©Î°ù
              </h3>
              {course.lessons.map((lesson, index) => (
                <div key={lesson.id} style={{
                  display: 'flex',
                  alignItems: 'flex-start',
                  padding: '12px',
                  marginBottom: '8px',
                  background: 'rgba(255, 255, 255, 0.05)',
                  borderRadius: '10px',
                  cursor: 'pointer',
                  transition: 'all 0.3s ease'
                }}>
                  <div style={{
                    backgroundColor: '#0ea5e9',
                    color: '#1f2937',
                    borderRadius: '50%',
                    width: '28px',
                    height: '28px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: '0.8rem',
                    fontWeight: 'bold',
                    marginRight: '12px',
                    flexShrink: 0,
                    marginTop: '2px'
                  }}>
                    {index + 1}
                  </div>
                  <div style={{ flex: 1, minWidth: 0 }}>
                    <h4 style={{ 
                      color: '#1f2937', 
                      margin: '0 0 5px 0',
                      fontSize: 'clamp(0.9rem, 2.5vw, 1rem)',
                      lineHeight: '1.4',
                      wordBreak: 'keep-all'
                    }}>
                      {lesson.title}
                    </h4>
                    <p style={{ 
                      color: '#1f2937', 
                      opacity: '0.7', 
                      margin: 0, 
                      fontSize: 'clamp(0.8rem, 2vw, 0.9rem)'
                    }}>
                      {lesson.duration}
                    </p>
                  </div>
                  <Play size={18} color="#0ea5e9" style={{ 
                    flexShrink: 0,
                    marginTop: '4px' 
                  }} />
                </div>
              ))}
            </div>
          </div>
        </div>
      ) : (
        // Í≤∞Ï†ú Ï†Ñ: Í∞ïÏùò ÏÜåÍ∞ú Î∞è ÌåêÎß§
        <div className="course-sales-view">
      {/* Î©îÏù∏ ÏΩòÌÖêÏ∏† ÏòÅÏó≠ */}
      <div className="course-layout">
        {/* ÏôºÏ™Ω Î©îÏù∏ ÏΩòÌÖêÏ∏† */}
        <div className="course-main">
          {/* ÌûàÏñ¥Î°ú ÏÑπÏÖò */}
          <section className="course-hero">
            <div className="hero-content">
              {/* ÌòÑÏû¨ ÏàòÍ∞ï Í∞ÄÎä• Î∞∞ÏßÄ */}
              <div className="available-badge" style={{
                display: 'inline-block',
                background: 'linear-gradient(135deg, #0ea5e9, #e55050)',
                color: '#1f2937',
                padding: '8px 16px',
                borderRadius: '20px',
                fontSize: '14px',
                fontWeight: '600',
                marginBottom: '20px'
              }}>
ÌòÑÏû¨ ÏàòÍ∞ï Í∞ÄÎä•
              </div>
              
              <h1 className="hero-title">
                Í∞ïÏùò 1: AI Í±¥Î¨º ÏßìÍ∏∞
              </h1>
              <h2 className="hero-subtitle-large" style={{
                fontSize: '1.5rem',
                fontWeight: '600',
                color: '#0ea5e9',
                marginBottom: '15px'
              }}>
AIÎ°ú ÏõîÏÑ∏ Î∞õÎäî ÎÇòÏùò Ï≤´ 'ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨º' ÏßìÍ∏∞
              </h2>
              <div className="detailed-description" style={{ color: '#1f2937', fontSize: '1.1rem', lineHeight: '1.8', marginBottom: '40px' }}>

                <div style={{ marginBottom: '30px' }}>
                  <h3 style={{ color: '#1f2937', fontSize: '1.4rem', marginBottom: '15px' }}>
                    "AIÍ∞Ä ÎåÄÏÑ∏ÎùºÎäîÎç∞, Ï†ïÏûë Ïñ¥ÎñªÍ≤å ÎèàÏùÑ Î≤åÏñ¥Ïïº Ìï†ÏßÄ ÎßâÎßâÌïòÏã†Í∞ÄÏöî?"
                  </h3>
                  <p style={{ color: '#1f2937' }}>
                    ÏãúÏ§ëÏùò AI Í∞ïÏùòÎì§ÏùÄ ChatGPT ÏÇ¨Ïö©Î≤ïÎßå Í∞ÄÎ•¥ÏπòÍ≥† ÎÅùÎÇ©ÎãàÎã§. ÌïòÏßÄÎßå Ïã§Ï†úÎ°ú ÌïÑÏöîÌïú Í±¥ 
                    <strong style={{ color: '#0ea5e9' }}>'ÎèàÏù¥ ÎêòÎäî AI ÌôúÏö©Î≤ï'</strong>Ïù¥Ï£†. 
                    Ïù¥ Í∞ïÏùòÎäî AI ÎèÑÍµ¨ ÏÇ¨Ïö©Î≤ïÎ∂ÄÌÑ∞ Ï≤´ ÏàòÏùµ Îã¨ÏÑ±ÍπåÏßÄ, Ïã§Ï†ú ÎèàÎ≤åÏù¥Í∞Ä Í∞ÄÎä•Ìïú ÏôÑÏ†ÑÌïú ÏãúÏä§ÌÖúÏùÑ Íµ¨Ï∂ïÌï¥ÎìúÎ¶ΩÎãàÎã§.
                  </p>
                </div>

                <div style={{ background: 'rgba(255, 255, 255, 0.1)', padding: '25px', borderRadius: '15px', marginBottom: '30px' }}>
                  <h4 style={{ color: '#1f2937', fontSize: '1.2rem', marginBottom: '15px' }}>
                    üí¨ Ïã§Ï†ú ÏàòÍ∞ïÏÉù ÍπÄ‚óã‚óãÎãòÏùò ÏÉùÏÉùÌïú ÌõÑÍ∏∞
                  </h4>
                  <p style={{ fontStyle: 'italic', color: '#1f2937', opacity: '0.9', lineHeight: '1.6' }}>
                    "ÏÜîÏßÅÌûà Ï≤òÏùåÏóî Î∞òÏã†Î∞òÏùòÌñàÏñ¥Ïöî. Í∑∏Îü∞Îç∞ Í∞ïÏùòÎ•º Îî∞ÎùºÌïòÎã§ Î≥¥Îãà Ï†ïÎßêÎ°ú Ïú†ÌäúÎ∏å Ï±ÑÎÑêÏù¥ ÎßåÎì§Ïñ¥ÏßÄÍ≥†, 
                    3Í∞úÏõî ÌõÑÏóêÎäî Îß§Ïõî 30ÎßåÏõêÏî© Íæ∏Ï§ÄÌûà Îì§Ïñ¥Ïò§Í∏∞ ÏãúÏûëÌñàÏäµÎãàÎã§. 
                    ÌöåÏÇ¨ ÏõîÍ∏âÎßåÏúºÎ°úÎäî Î∂ÄÏ°±ÌñàÎäîÎç∞, Ïù¥Ï†ú Î∂ÄÏàòÏûÖÏù¥ ÏÉùÍ≤®ÏÑú Í≤ΩÏ†úÏ†ÅÏúºÎ°ú Ïó¨Ïú†Í∞Ä ÏÉùÍ≤ºÏñ¥Ïöî!"
                  </p>
                </div>

                <div style={{ marginBottom: '30px' }}>
                  <h3 style={{ color: '#1f2937', fontSize: '1.4rem', marginBottom: '15px' }}>
                    ‚ú® Ïôú Ïù¥ Í∞ïÏùòÎ•º ÏÑ†ÌÉùÌï¥Ïïº Ìï†ÍπåÏöî?
                  </h3>
                  <div style={{ display: 'grid', gap: '15px' }}>
                    <div style={{ padding: '20px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '12px', color: '#1f2937', borderLeft: '4px solid #0ea5e9' }}>
                      <strong style={{ color: '#0ea5e9', fontSize: '1.1rem' }}>üí∞ Ïã§Ï†ú ÏàòÏùµÍπåÏßÄ ÏôÑÏÑ±</strong><br/>
                      <span style={{ fontSize: '0.95rem', opacity: '0.9' }}>Ïù¥Î°†Îßå Î∞∞Ïö∞Í≥† ÎÅùÏù¥ ÏïÑÎãôÎãàÎã§. Ïú†ÌäúÎ∏å Ïï†ÎìúÏÑºÏä§ ÏàòÏùµÏù¥ Ïã§Ï†úÎ°ú Îì§Ïñ¥Ïò§Îäî ÏãúÏä§ÌÖúÍπåÏßÄ ÏôÑÏÑ±ÏãúÏºú ÎìúÎ¶ΩÎãàÎã§.</span>
                    </div>
                    <div style={{ padding: '20px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '12px', color: '#1f2937', borderLeft: '4px solid #0ea5e9' }}>
                      <strong style={{ color: '#0ea5e9', fontSize: '1.1rem' }}>üéØ Í∞úÏù∏ ÎßûÏ∂§ Í¥ÄÎ¶¨</strong><br/>
                      <span style={{ fontSize: '0.95rem', opacity: '0.9' }}>AI Î©òÌÜ† Ï†úÏù¥Í∞Ä ÏßÅÏ†ë Ïó¨Îü¨Î∂ÑÏùò ÏßÑÌñâ ÏÉÅÌô©ÏùÑ Ï≤¥ÌÅ¨ÌïòÍ≥†, Í∞úÏù∏Î≥Ñ ÎßûÏ∂§ Ï°∞Ïñ∏ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.</span>
                    </div>
                    <div style={{ padding: '20px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '12px', color: '#1f2937', borderLeft: '4px solid #0ea5e9' }}>
                      <strong style={{ color: '#0ea5e9', fontSize: '1.1rem' }}>üèÜ Í≤ÄÏ¶ùÎêú ÏÑ±Í≥µ Î∞©Î≤ï</strong><br/>
                      <span style={{ fontSize: '0.95rem', opacity: '0.9' }}>Ïù¥ÎØ∏ ÎßéÏùÄ ÏàòÍ∞ïÏÉùÎì§Ïù¥ Ïã§Ï†ú ÏàòÏùµÏùÑ Îã¨ÏÑ±Ìïú Í≤ÄÏ¶ùÎêú Î∞©Î≤ïÎ°†ÏûÖÎãàÎã§. Ïù¥Î°†Ïù¥ ÏïÑÎãå Ïã§Ï†Ñ Í≤ΩÌóòÏùÑ Î∞îÌÉïÏúºÎ°ú Ìï©ÎãàÎã§.</span>
                    </div>
                    <div style={{ padding: '20px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '12px', color: '#1f2937', borderLeft: '4px solid #0ea5e9' }}>
                      <strong style={{ color: '#0ea5e9', fontSize: '1.1rem' }}>üî∞ ÏôÑÏ†Ñ Ï¥àÎ≥¥ÎèÑ OK</strong><br/>
                      <span style={{ fontSize: '0.95rem', opacity: '0.9' }}>Ïª¥Ìì®ÌÑ∞Î•º Ïûò Î™∞ÎùºÎèÑ, AIÎ•º Ï≤òÏùå Ï†ëÌï¥ÎèÑ Í¥úÏ∞ÆÏäµÎãàÎã§. ÌÅ¥Î¶≠ Ìïú Î≤àÍπåÏßÄ ÏÑ∏ÏÑ∏ÌïòÍ≤å ÏïåÎ†§ÎìúÎ¶ΩÎãàÎã§.</span>
                    </div>
                  </div>
                </div>

                <div style={{ background: 'rgba(255, 255, 255, 0.15)', padding: '25px', borderRadius: '15px', marginBottom: '30px' }}>
                  <h4 style={{ color: '#1f2937', fontSize: '1.2rem', marginBottom: '15px' }}>
                    üéØ Í∞ïÏùò ÏôÑÎ£å ÌõÑ Ïó¨Îü¨Î∂ÑÏù¥ Í∞ñÍ≤å Îê† Î≥ÄÌôî:
                  </h4>
                  <div style={{ display: 'grid', gap: '12px', fontSize: '1rem', color: '#1f2937' }}>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '10px' }}>
                      <span style={{ color: '#0ea5e9', fontSize: '1.1rem', marginTop: '2px' }}>üèóÔ∏è</span>
                      <p><strong style={{ color: '#0ea5e9' }}>ÏàòÏùµÌòï Ïú†ÌäúÎ∏å Ï±ÑÎÑê:</strong> Ïõî 30-50ÎßåÏõê ÏàòÏùµÏùÑ Î™©ÌëúÎ°ú ÌïòÎäî Ï≤¥Í≥ÑÏ†ÅÏù∏ Ï±ÑÎÑê Ïö¥ÏòÅ ÏãúÏä§ÌÖú</p>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '10px' }}>
                      <span style={{ color: '#0ea5e9', fontSize: '1.1rem', marginTop: '2px' }}>üí≥</span>
                      <p><strong style={{ color: '#0ea5e9' }}>Ïï†ÎìúÏÑºÏä§ ÏäπÏù∏ ÎÖ∏ÌïòÏö∞:</strong> ÏäπÏù∏Î∞õÍ∏∞ Ïñ¥Î†§Ïö¥ Ïï†ÎìúÏÑºÏä§Î•º Ìïú Î≤àÏóê ÌÜµÍ≥ºÌïòÎäî Í≤ÄÏ¶ùÎêú Ï†ÑÎûµ</p>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '10px' }}>
                      <span style={{ color: '#0ea5e9', fontSize: '1.1rem', marginTop: '2px' }}>ü§ñ</span>
                      <p><strong style={{ color: '#0ea5e9' }}>AI ÏΩòÌÖêÏ∏† Ï†úÏûë Îä•Î†•:</strong> ÌòºÏûêÏÑúÎèÑ Ï†ÑÎ¨∏Í∞Ä ÏàòÏ§ÄÏùò ÏΩòÌÖêÏ∏†Î•º ÎßåÎì§ Ïàò ÏûàÎäî AI ÌôúÏö©Î≤ï</p>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '10px' }}>
                      <span style={{ color: '#0ea5e9', fontSize: '1.1rem', marginTop: '2px' }}>‚öôÔ∏è</span>
                      <p><strong style={{ color: '#0ea5e9' }}>ÏûêÎèôÌôî ÏàòÏùµ ÏãúÏä§ÌÖú:</strong> Ïû†Îì§Ïñ¥ ÏûàÎäî ÎèôÏïàÏóêÎèÑ ÎèàÏù¥ Îì§Ïñ¥Ïò§Îäî Ìå®ÏãúÎ∏å Ïù∏Ïª¥ Íµ¨Ï°∞</p>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'flex-start', gap: '10px' }}>
                      <span style={{ color: '#0ea5e9', fontSize: '1.1rem', marginTop: '2px' }}>üèÜ</span>
                      <p><strong style={{ color: '#0ea5e9' }}>ÎîîÏßÄÌÑ∏ ÏûêÏÇ∞ ÏÜåÏú†:</strong> ÌèâÏÉù ÏÜåÏú† Í∞ÄÎä•Ìïú ÎÇòÎßåÏùò ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Î∂ÄÎèôÏÇ∞</p>
                    </div>
                  </div>
                </div>

                <div style={{ background: 'rgba(255, 107, 107, 0.1)', padding: '20px', borderRadius: '12px', marginBottom: '20px', border: '1px solid rgba(255, 107, 107, 0.3)' }}>
                  <h3 style={{ color: '#0ea5e9', fontSize: '1.2rem', marginBottom: '15px', textAlign: 'center' }}>
                    ‚ö†Ô∏è ÏÜîÏßÅÌïú ÏïàÎÇ¥ÏÇ¨Ìï≠
                  </h3>
                  <p style={{ color: '#1f2937', textAlign: 'center', lineHeight: '1.6' }}>
                    Ïù¥ Í∞ïÏùòÎäî <strong style={{ color: '#0ea5e9' }}>Ï¶âÏÑùÏóêÏÑú Î∂ÄÏûêÍ∞Ä ÎêòÎäî ÎßàÎ≤ï</strong>Ïù¥ ÏïÑÎãôÎãàÎã§.<br/>
                    ÌïòÎ£® 30Î∂ÑÏî©Ïù¥ÎùºÎèÑ Íæ∏Ï§ÄÌûà ÌïôÏäµÌïòÍ≥† Ïã§ÌñâÌïòÏã§ Î∂ÑÎì§ÏóêÍ≤åÎßå Ï∂îÏ≤úÌï©ÎãàÎã§.<br/>
                    <span style={{ opacity: '0.8', fontSize: '0.9rem' }}>
                      Ïù¥Î°†Îßå Îì£Í≥† Ïã§ÌñâÌïòÏßÄ ÏïäÏúºÎ©¥ Í≤∞Í≥ºÎèÑ ÏóÜÏäµÎãàÎã§.
                    </span>
                  </p>
                </div>
              </div>
              
              {/* Í∞ïÏùò Î©îÌÉÄ Ï†ïÎ≥¥ */}
              <div className="course-meta-info">
                <div className="meta-item" style={{ color: '#1f2937' }}>
                  <Star size={16} color="#0ea5e9" />
                  <span>ÌîÑÎ¶¨ÎØ∏ÏóÑ</span>
                </div>
                <div className="meta-item" style={{ color: '#1f2937' }}>
                  <Users size={16} color="#1f2937" />
                  <span>Ï†ïÏõêÏÑù (AI Î©òÌÜ† Ï†úÏù¥)</span>
                </div>
                <div className="meta-item" style={{ color: '#1f2937' }}>
                  <Clock size={16} color="#1f2937" />
                  <span>12ÏãúÍ∞Ñ 30Î∂Ñ (14Í∞ïÏùò)</span>
                </div>
                <div className="meta-item" style={{ color: '#1f2937' }}>
                  <Calendar size={16} color="#0ea5e9" />
                  <span>ÌòÑÏû¨ ÏàòÍ∞ï Í∞ÄÎä•</span>
                </div>
              </div>

              {/* ÌòÑÏû¨ ÏàòÍ∞ï Í∞ÄÎä• ÏïàÎÇ¥ */}
              <div className="available-section" style={{ 
                background: 'rgba(255, 107, 107, 0.1)', 
                padding: '30px', 
                borderRadius: '15px', 
                marginTop: '30px',
                textAlign: 'center' 
              }}>
                <h3 style={{ fontSize: '1.4rem', marginBottom: '25px', color: '#1f2937', textAlign: 'center' }}>
                  ÏßÄÍ∏à ÏãúÏûëÌï¥Ïïº ÌïòÎäî Ïù¥Ïú† (ÏãúÍ∞ÑÏùÄ Í∏∞Îã§Î†§Ï£ºÏßÄ ÏïäÏäµÎãàÎã§)
                </h3>
                <div style={{ fontSize: '1.1rem', lineHeight: '1.7', color: '#1f2937' }}>
                  <div style={{ marginBottom: '20px', padding: '20px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '12px' }}>
                    <h4 style={{ color: '#1f2937', marginBottom: '10px' }}>AI ÏãúÏû•Ïù¥ Ìè≠Î∞úÏ†ÅÏúºÎ°ú ÏÑ±Ïû•ÌïòÍ≥† ÏûàÏäµÎãàÎã§</h4>
                    <p>2024ÎÖÑ ÌòÑÏû¨, AI ÏΩòÌÖêÏ∏† ÏãúÏû• Í∑úÎ™®Îäî Ï†ÑÎÖÑ ÎåÄÎπÑ 340% Ï¶ùÍ∞ÄÌñàÏäµÎãàÎã§. ÌïòÏßÄÎßå ÎåÄÎ∂ÄÎ∂ÑÏùò ÏÇ¨ÎûåÎì§ÏùÄ ÏïÑÏßÅÎèÑ Íµ¨Í≤ΩÎßå ÌïòÍ≥† ÏûàÏñ¥Ïöî. <strong style={{ color: '#0ea5e9' }}>ÏßÄÍ∏àÏù¥ Î∞îÎ°ú ÏÑ†Ï†êÌï† Í∏∞Ìöå</strong>ÏûÖÎãàÎã§.</p>
                  </div>

                  <div style={{ marginBottom: '20px', padding: '20px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '12px' }}>
                    <h4 style={{ color: '#1f2937', marginBottom: '10px' }}>Ïù¥ÎØ∏ Í≤ÄÏ¶ùÎêú ÏÑ±Í≥µ ÏÇ¨Î°ÄÎì§</h4>
                    <p><strong style={{ color: '#0ea5e9' }}>Î∞ï‚óã‚óãÎãò (Ï£ºÎ∂Ä):</strong> "ÏïÑÏù¥ Îëò ÌÇ§Ïö∞Î©¥ÏÑúÎèÑ Îß§Ïõî 50ÎßåÏõêÏî© Î≤åÍ≥† ÏûàÏñ¥Ïöî"<br/>
                    <strong style={{ color: '#0ea5e9' }}>Ïù¥‚óã‚óãÎãò (ÌöåÏÇ¨Ïõê):</strong> "Ìá¥Í∑º ÌõÑ 2ÏãúÍ∞ÑÏúºÎ°ú Ïõî 80ÎßåÏõê Î∂ÄÏàòÏûÖ Îã¨ÏÑ±"<br/>
                    <strong style={{ color: '#0ea5e9' }}>Ïµú‚óã‚óãÎãò (ÏùÄÌá¥Ïûê):</strong> "ÏùÄÌá¥ ÌõÑ ÏÉàÎ°úÏö¥ Ïù∏ÏÉù 2ÎßâÏùò ÏãúÏûëÏù¥ ÎêòÏóàÏñ¥Ïöî"</p>
                  </div>

                  <div style={{ marginBottom: '20px', padding: '20px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '12px' }}>
                    <h4 style={{ color: '#1f2937', marginBottom: '10px' }}>ÏôÑÎ≤ΩÌïú Ï¥àÎ≥¥Ïûê ÎßûÏ∂§ ÏÑ§Í≥Ñ</h4>
                    <p><strong style={{ color: '#0ea5e9' }}>‚Ä¢ Ïª¥ÎßπÎèÑ OK:</strong> Ïú†ÌäúÎ∏å Ï±ÑÎÑê ÎßåÎìúÎäî Í≤ÉÎ∂ÄÌÑ∞ Ï∞®Í∑ºÏ∞®Í∑º ÏïåÎ†§ÎìúÎ¶ΩÎãàÎã§<br/>
                    <strong style={{ color: '#0ea5e9' }}>‚Ä¢ AI Î™∞ÎùºÎèÑ OK:</strong> AI ÎèÑÍµ¨ ÌïòÎÇòÌïòÎÇò ÌÅ¥Î¶≠ÌïòÎäî Î∞©Î≤ïÍπåÏßÄ ÏÑ∏ÏÑ∏ÌïòÍ≤å Í∞ÄÏù¥Îìú<br/>
                    <strong style={{ color: '#0ea5e9' }}>‚Ä¢ ÏãúÍ∞Ñ ÏóÜÏñ¥ÎèÑ OK:</strong> ÌïòÎ£® 30Î∂ÑÏî©Îßå Ìà¨ÏûêÌïòÎ©¥ Ï∂©Î∂ÑÌïú Ïª§Î¶¨ÌÅòÎüº</p>
                  </div>

                  <div style={{ background: 'rgba(255, 255, 255, 0.15)', padding: '25px', borderRadius: '15px', textAlign: 'center' }}>
                    <h4 style={{ color: '#1f2937', marginBottom: '15px', fontSize: '1.2rem' }}>ÌäπÎ≥Ñ ÌòúÌÉù (ÏÑ†Ï∞©Ïàú 100Î™Ö ÌïúÏ†ï)</h4>
                    <div style={{ marginBottom: '15px', color: '#1f2937' }}>
                      <p><strong style={{ color: '#0ea5e9' }}>‚Ä¢ 1:1 Í∞úÏù∏ Ïª®ÏÑ§ÌåÖ:</strong> AI Î©òÌÜ† Ï†úÏù¥ÏôÄ 30Î∂Ñ ÌôîÏÉÅ Ïª®ÏÑ§ÌåÖ (50ÎßåÏõê ÏÉÅÎãπ)</p>
                      <p><strong style={{ color: '#0ea5e9' }}>‚Ä¢ ÏôÑÏ£º ÏßÄÏõê:</strong> 3Í∞úÏõîÍ∞Ñ ÌïôÏäµ ÏôÑÏ£ºÎ•º ÏúÑÌïú Ï†ÑÎã¥ Î©òÌÜ†ÎßÅ ÏßÄÏõê</p>
                      <p><strong style={{ color: '#0ea5e9' }}>‚Ä¢ ÌèâÏÉù ÏóÖÎç∞Ïù¥Ìä∏:</strong> ÏÉàÎ°úÏö¥ AI ÎèÑÍµ¨ Ï∂îÍ∞Ä Ïãú Î¨¥Î£å ÏóÖÎç∞Ïù¥Ìä∏</p>
                      <p><strong style={{ color: '#0ea5e9' }}>‚Ä¢ Ïª§ÎÆ§ÎãàÌã∞ Î©§Î≤ÑÏã≠:</strong> ÏÑ±Í≥µ ÏÇ¨Î°ÄÎ•º Í≥µÏú†ÌïòÎäî VIP Ïª§ÎÆ§ÎãàÌã∞ ÌèâÏÉù Ïù¥Ïö©</p>
                    </div>
                    <p style={{ fontSize: '0.9rem', opacity: '0.9', color: '#1f2937' }}>
                      ‚Äª Ïù¥ ÌòúÌÉùÎì§ÏùÄ ÏàòÍ∞ïÎ£åÎ°úÎäî Ï†àÎåÄ Íµ¨Ìï† Ïàò ÏóÜÎäî Í∞ÄÏπòÏûÖÎãàÎã§
                    </p>
                  </div>
                </div>
              </div>

              {/* ÏàòÍ∞ï Ïã†Ï≤≠ ÏÑπÏÖò */}
              <div className="pricing-section" style={{ 
                marginTop: '40px', 
                padding: '30px', 
                background: 'rgba(255, 255, 255, 0.05)', 
                borderRadius: '15px',
                textAlign: 'center' 
              }}>
                <h3 style={{ fontSize: '1.5rem', marginBottom: '20px', color: '#1f2937' }}>ÏßÄÍ∏à ÏãúÏûëÌïòÏÑ∏Ïöî!</h3>
                
                <div className="price-info" style={{ marginBottom: '20px' }}>
                  <div style={{ marginBottom: '10px' }}>
                    <span style={{ 
                      fontSize: '1.2rem', 
                      textDecoration: 'line-through', 
                      opacity: '0.6',
                      marginRight: '15px' 
                    }}>
                      ‚Ç©{originalPrice.toLocaleString()}
                    </span>
                    <span style={{ 
                      background: '#0ea5e9', 
                      color: '#1f2937', 
                      padding: '4px 8px', 
                      borderRadius: '12px', 
                      fontSize: '0.8rem' 
                    }}>
                      {discount}% Ìï†Ïù∏
                    </span>
                  </div>
                  <div style={{ fontSize: '2rem', fontWeight: '700', color: '#0ea5e9' }}>
                    ‚Ç©{earlyBirdPrice.toLocaleString()}
                  </div>
                </div>

                {/* ÏàòÍ∞ï ÌòúÌÉù */}
                <div className="benefits-list" style={{ 
                  textAlign: 'left', 
                  maxWidth: '450px', 
                  margin: '0 auto 30px' 
                }}>
                  {[
                    'ÏàòÏùµÌòï Ïú†ÌäúÎ∏å Ï±ÑÎÑê Ïö¥ÏòÅ ÎÖ∏ÌïòÏö∞ ÏôÑÏ†Ñ ÏäµÎìù',
                    'Ï†ÑÎ¨∏Í∞Ä ÏàòÏ§ÄÏùò Ï±ÑÎÑê Íµ¨Ï∂ï Î∞è Íµ¨ÎèÖÏûê Ï¶ùÍ∞Ä Ï†ÑÎûµ',
                    'Ïï†ÎìúÏÑºÏä§ ÏäπÏù∏Î∞õÎäî Ìö®Í≥ºÏ†ÅÏù∏ Î∞©Î≤ïÍ≥º ÏµúÏ†ÅÌôî Ï†ÑÎûµ',
                    'AI ÎèÑÍµ¨Î•º ÌôúÏö©Ìïú Ìö®Ïú®Ï†ÅÏù∏ Í≥†ÌíàÏßà ÏΩòÌÖêÏ∏† Ï†úÏûëÎ≤ï',
                    '"ÎîîÏßÄÌÑ∏ Í±¥Î¨ºÏ£º" Í≥µÏãù ÏàòÎ£åÏ¶ù (Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Í∏∞Ïû¨ Í∞ÄÎä•)',
                    'ÌèâÏÉù ÏóÖÎç∞Ïù¥Ìä∏ÎêòÎäî ÏµúÏã† AI ÎèÑÍµ¨ Í∞ÄÏù¥ÎìúÎ∂Å',
                    'AI Î©òÌÜ† Ï†úÏù¥ÏôÄ 1:1 ÏÑ±Ïû• Ïª®ÏÑ§ÌåÖ (50ÎßåÏõê ÏÉÅÎãπ)',
                    'ÏßÄÏÜç Í∞ÄÎä•Ìïú ÏàòÏùµÌòï ÏΩòÌÖêÏ∏† Ïö¥ÏòÅ ÏãúÏä§ÌÖú Íµ¨Ï∂ïÎ≤ï'
                  ].map((benefit, index) => (
                    <div key={index} style={{ 
                      display: 'flex', 
                      alignItems: 'center', 
                      gap: '10px', 
                      marginBottom: '10px' 
                    }}>
                      <CheckCircle size={16} color="#0ea5e9" />
                      <span style={{ fontSize: '0.9rem', color: '#1f2937' }}>{benefit}</span>
                    </div>
                  ))}
                </div>

                {/* ÏàòÍ∞ï Ïã†Ï≤≠ Î≤ÑÌäº */}
                <button 
                  className="watch-trailer-btn premium-btn"
                  onClick={isLoggedIn && !isAlreadyEnrolled ? handleEarlyBirdPayment : handleLoginRequired}
                  disabled={isLoading || !tossPayments || checkingEnrollment || isAlreadyEnrolled}
                  style={{
                    width: '100%',
                    maxWidth: '300px',
                    padding: '15px 30px',
                    fontSize: '1.1rem',
                    opacity: (!isLoggedIn || isAlreadyEnrolled) ? '0.7' : '1'
                  }}
                >
                  <Play size={16} />
                  {checkingEnrollment ? 'ÏàòÍ∞ï ÏÉÅÌÉú ÌôïÏù∏ Ï§ë...' :
                   isLoading ? 'Í≤∞Ï†ú ÏßÑÌñâ Ï§ë...' : 
                   !isLoggedIn ? 'Î°úÍ∑∏Ïù∏ ÌõÑ Ïù¥Ïö© Í∞ÄÎä•' : 
                   isAlreadyEnrolled ? 'Ïù¥ÎØ∏ ÏàòÍ∞ï Ï§ëÏûÖÎãàÎã§' : 'ÏßÄÍ∏à ÏãúÏûëÌïòÍ∏∞'}
                </button>

                <p style={{ fontSize: '0.8rem', opacity: '0.7', marginTop: '15px' }}>
                  {isAlreadyEnrolled 
                    ? 'Ïù¥ÎØ∏ ÏàòÍ∞ï Ï§ëÏù∏ Í∞ïÏ¢åÏûÖÎãàÎã§' :
                   isLoggedIn 
                    ? 'ÌÜ†Ïä§ÌéòÏù¥Î®ºÏ∏†Î°ú ÏïàÏ†ÑÌïòÍ≤å Í≤∞Ï†úÎê©ÎãàÎã§' 
                    : 'Î®ºÏ†Ä Î°úÍ∑∏Ïù∏Ìïú ÌõÑ Î∞îÎ°ú ÏãúÏûëÌïòÏÑ∏Ïöî'}
                </p>
                
                {!isAlreadyEnrolled && (
                  <div style={{ 
                    marginTop: '20px', 
                    padding: '20px', 
                    background: 'rgba(255, 255, 255, 0.1)', 
                    borderRadius: '10px',
                    textAlign: 'center'
                  }}>
                    <h4 style={{ color: '#1f2937', marginBottom: '10px', fontSize: '1rem' }}>
                      ÎßàÏßÄÎßâ Í≤ΩÍ≥†: Ïù¥ Í∏∞ÌöåÎ•º ÎÜìÏπòÎ©¥...
                    </h4>
                    <p style={{ color: '#1f2937', fontSize: '0.9rem', lineHeight: '1.5' }}>
                      AI ÏãúÏû•ÏùÄ Îπ†Î•¥Í≤å Ìè¨ÌôîÎêòÍ≥† ÏûàÏäµÎãàÎã§. ÏßÄÍ∏à ÏãúÏûëÌïòÏßÄ ÏïäÏúºÎ©¥ 1ÎÖÑ ÌõÑÏóêÎäî Í≤ΩÏüÅÏù¥ 10Î∞∞ Îçî ÏπòÏó¥Ìï¥ÏßëÎãàÎã§.<br/>
                      <strong style={{ color: '#0ea5e9' }}>ÏßÄÍ∏àÏù¥ ÏïÑÎãàÎ©¥ Ïñ∏Ï†ú ÏãúÏûëÌïòÏãúÍ≤†ÏäµÎãàÍπå?</strong>
                    </p>
                  </div>
                )}
              </div>
            </div>
          </section>
        </div>

        {/* Ïò§Î•∏Ï™Ω ÏÇ¨Ïù¥ÎìúÎ∞î - Ïª§Î¶¨ÌÅòÎüº */}
        <div className="course-sidebar">
          <div className="sidebar-header">
            <h3 style={{ color: '#1f2937' }}>ÏàòÏùµÌòï ÎîîÏßÄÌÑ∏ Í±¥Î¨º ÏßìÍ∏∞ Î°úÎìúÎßµ</h3>
            <p style={{ color: '#1f2937', opacity: '0.8' }}>Ï¥ù {course.lessons.length}Í∞ïÏùò ¬∑ 4ÎåÄ ÌååÌä∏ ¬∑ ÏàòÏùµ Îã¨ÏÑ± Î≥¥Ïû•</p>
          </div>
          
          <div className="lesson-list">
            {course.lessons.slice(0, 10).map((lesson, index) => (
              <div 
                key={lesson.id} 
                className="lesson-item coming-soon-lesson"
                style={{ opacity: '0.8' }}
              >
                <div className="lesson-item-content">
                  <div className="lesson-number" style={{ 
                    backgroundColor: '#0ea5e9',
                    color: '#1f2937',
                    borderRadius: '50%',
                    width: '24px',
                    height: '24px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: '0.8rem',
                    fontWeight: 'bold'
                  }}>
                    {index + 1}
                  </div>
                  <div className="lesson-info">
                    <h4 className="lesson-title" style={{ color: '#1f2937' }}>{lesson.title}</h4>
                    <div className="lesson-meta">
                      <span className="lesson-duration" style={{ color: '#1f2937', opacity: '0.7' }}>
                        <Clock size={14} color="#1f2937" />
                        {lesson.duration}
                      </span>
                      {lesson.hasQuiz && (
                        <span className="lesson-quiz" style={{ color: '#0ea5e9' }}>
                          ÌÄ¥Ï¶à Ìè¨Ìï®
                        </span>
                      )}
                    </div>
                  </div>
                  
                  <div className="lesson-status">
                    <div style={{ 
                      width: '16px', 
                      height: '16px', 
                      border: '2px solid #0ea5e9', 
                      borderRadius: '50%' 
                    }}></div>
                  </div>
                </div>
              </div>
            ))}
            
            {/* Îçî ÎßéÏùÄ Í∞ïÏùò ÌëúÏãú */}
            <div className="more-lessons" style={{ 
              textAlign: 'center', 
              padding: '20px', 
              opacity: '0.7' 
            }}>
              <p style={{ color: '#1f2937' }}>+ {course.lessons.length - 10}Í∞ú Í∞ïÏùò Îçî</p>
              <p style={{ fontSize: '0.8rem', marginTop: '5px', color: '#0ea5e9' }}>
                ÏßÄÍ∏à Î∞îÎ°ú ÏàòÍ∞ï Í∞ÄÎä•
              </p>
            </div>
          </div>

          {/* ÏàòÍ∞ï ÏïàÎÇ¥ Î∞ïÏä§ */}
          <div className="course-info-box" style={{
            background: 'linear-gradient(135deg, #0ea5e9, #e55050)',
            padding: '20px',
            borderRadius: '15px',
            textAlign: 'center',
            marginTop: '20px'
          }}>
            <CheckCircle size={24} style={{ marginBottom: '10px', color: '#1f2937' }} />
            <h4 style={{ marginBottom: '10px', color: '#1f2937' }}>ÏàòÍ∞ï ÏïàÎÇ¥</h4>
            <p style={{ fontSize: '1.2rem', fontWeight: '700', color: '#1f2937' }}>
              ÏßÄÍ∏à Î∞îÎ°ú ÏàòÍ∞ï Í∞ÄÎä•
            </p>
            <p style={{ fontSize: '0.9rem', marginTop: '5px', opacity: '0.9', color: '#1f2937' }}>
              Î™®Îì† Í∞ïÏùòÍ∞Ä Ï§ÄÎπÑÎêòÏñ¥ ÏûàÏäµÎãàÎã§
            </p>
          </div>
        </div>
      </div>
        </div>
      )}
    </div>
  );
};

export default WorkflowAutomationMasterPage; 